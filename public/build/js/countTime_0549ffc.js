$(function(){$.fn.countTime=function(t){var e={startTime:0,endTime:this.attr("data-end")||0,nowTime:0,interval:1e3,minDigit:!0,showDay:!0,timeUnitCls:{day:"m-d",hour:"m-h",min:"m-m",sec:"m-s"},startTips:"",endTips:"",stopTips:"",timeStamp:!0,stampSet:{model:"normal",set:{day:"天",hour:"时",min:"分",sec:"秒"}}},a=$.extend({},e,t);return this.each(function(){function t(t,e){return t?10>e?e="0"+e:e:e}var e,i=null,n=$(this),s=$("<span></span>"),m=isNaN(a.startTime)?Date.parse(a.startTime.replace(/-/g,"/"))/1e3:Math.round(a.startTime),o=isNaN(a.endTime)?Date.parse(a.endTime.replace(/-/g,"/"))/1e3:Math.round(a.endTime);e=0===a.nowTime?Math.round((new Date).getTime()/1e3):Math.round(a.nowTime);var r={day:"",hour:"",min:"",sec:""};a.timeStamp&&(r=a.stampSet.set),function d(){var p,l={},T="";if(p=m>e?m-e:o-e,n.html(""),a.showDay?(l.day=t(a.minDigit,Math.floor(p/3600/24)),l.hour=t(a.minDigit,Math.floor(p/3600%24))):l.hour=t(a.minDigit,Math.floor(p/3600)),l.min=t(a.minDigit,Math.floor(p/60%60)),l.sec=t(a.minDigit,Math.floor(p%60)),m>e)a.startTips&&(T=a.startTips);else{if(!(o>e)){if(a.stopTips)T=a.stopTips,n.html(T);else for(var h in l)if(("day"!=h||a.showDay)&&(l[h]=0,a.timeStamp))switch(a.stampSet.model){case"after":var c=$(r[h]);s.clone().addClass(a.timeUnitCls[h]).text(l[h]).appendTo(n),c.appendTo(n);break;case"normal":s.clone().addClass(a.timeUnitCls[h]).text(l[h]+r[h]).appendTo(n)}return clearTimeout(i),!1}a.endTips&&(T=a.endTips)}n.html(T);for(var h in l)if(("day"!=h||a.showDay)&&a.timeStamp)switch(a.stampSet.model){case"after":var c=$(r[h]);s.clone().addClass(a.timeUnitCls[h]).text(l[h]).appendTo(n),c.appendTo(n);break;case"normal":s.clone().addClass(a.timeUnitCls[h]).text(l[h]+r[h]).appendTo(n)}e+=a.interval/1e3,i=setTimeout(function(){d()},a.interval)}()})}});